<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>升級與技能頁面</title>
  <style>
    body { font-family: sans-serif; padding: 20px; padding-top: 60px; }
    button { padding: 4px 8px; margin: 2px; }
    .stat-row { margin-bottom: 10px; }
    .stat-label { display: inline-block; width: 100px; }
  </style>
</head>
<body>
  <h2>⬆️ 分配能力值</h2>
  <div>剩餘能力點數：<span id="remainingPoints">0</span></div>

  <div id="statControls">
    <div class="stat-row">
      <span class="stat-label">生命值</span>
      <button onclick="adjustStat('hp', -1)">-</button>
      <span id="hpVal">0</span>
      <button onclick="adjustStat('hp', 1)">+</button>
    </div>
    <div class="stat-row">
      <span class="stat-label">攻擊力</span>
      <button onclick="adjustStat('attack', -1)">-</button>
      <span id="attackVal">0</span>
      <button onclick="adjustStat('attack', 1)">+</button>
    </div>
    <div class="stat-row">
      <span class="stat-label">運氣值</span>
      <button onclick="adjustStat('luck', -1)">-</button>
      <span id="luckVal">0</span>
      <button onclick="adjustStat('luck', 1)">+</button>
    </div>
    <div class="stat-row">
      <span class="stat-label">攻擊速度</span>
      <button onclick="adjustStat('atk_speed', -1)">-</button>
      <span id="atk_speedVal">0</span>
      <button onclick="adjustStat('atk_speed', 1)">+</button>
    </div>
  </div>

  <div>
    <button onclick="resetStats()">重置</button>
    <button onclick="confirmUpgrade()">確認升級</button>
  </div>

  <script>
    const statPoints = 5; // 假設從 API 取得的剩餘能力值點數
    let remaining = statPoints;
    const allocations = {
      hp: 0,
      attack: 0,
      luck: 0,
      atk_speed: 0
    };

    function adjustStat(stat, delta) {
      if (delta > 0 && remaining <= 0) return;
      if (allocations[stat] + delta < 0) return;

      allocations[stat] += delta;
      remaining -= delta;

      document.getElementById(`${stat}Val`).innerText = allocations[stat];
      document.getElementById("remainingPoints").innerText = remaining;
    }

    function resetStats() {
      for (let stat in allocations) {
        allocations[stat] = 0;
        document.getElementById(`${stat}Val`).innerText = 0;
      }
      remaining = statPoints;
      document.getElementById("remainingPoints").innerText = remaining;
    }

    function confirmUpgrade() {
      alert("送出升級：" + JSON.stringify(allocations));
      // 實際開發中可送出 POST 請求
    }
  </script>
</body>
</html>
